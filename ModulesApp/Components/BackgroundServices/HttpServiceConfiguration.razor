@using ModulesApp.Helpers
@using ModulesApp.Models.BackgroundServices
@using System.Text.RegularExpressions

<MudTextField Label="Url" HelperText="Server address" Style="max-width:400px"
              @bind-Value="Url" Variant="@Variant.Text" Clearable Disabled=IsDiabled/>

@code 
{
    [Parameter, EditorRequired]
    public DbBackgroundService Service { get; set; }

    [Parameter, EditorRequired]
    public bool HasError { get; set; }

    [Parameter, EditorRequired]
    public bool IsDiabled { get; set; }

    protected override void OnInitialized()
    {
        if (!Service.ConfigurationData.ContainsKey("Url"))
        {
            Service.ConfigurationData["Url"] = "https://microsoftedge.github.io/Demos/json-dummy-data/64KB.json";
        }
    }

    private string Url
    {
        get => DataConvertor.ToString(Service.ConfigurationData["Url"]);
        set => Service.ConfigurationData["Url"] = value;
    }
}
