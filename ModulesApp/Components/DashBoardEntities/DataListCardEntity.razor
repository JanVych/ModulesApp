@using ModulesApp.Models.Dasboards
@using System.Text.Json
@using ModulesApp.Models.Dasboards.Entities

@if (EditMode)
{
    <MudCard Style="width: 300px; height: 200px;">
        <MudCardHeader>
            <CardHeaderContent>
                <MudText Typo="Typo.h4">@Entity.Name</MudText>
                <MudText Typo="Typo.h4">@Entity.Id</MudText>
            </CardHeaderContent>
            <CardHeaderActions>
                <MudIconButton Icon="@Icons.Material.Filled.Delete" Color="Color.Error" OnClick="OnDeleteButtonClick" />
            </CardHeaderActions>
        </MudCardHeader>
        <MudCardContent>
         
        </MudCardContent>
    </MudCard>
}
else
{
    <MudCard Style="width: 300px;">
        <MudCardHeader>
            <CardHeaderContent>
                <MudText Typo="Typo.h4">@Entity.Name</MudText>
            </CardHeaderContent>
        </MudCardHeader>
        <MudCardContent>
            <MudTable T="(string, string)" Items="@Entity.TableData" Bordered="true" Hover="true" Elevation="0">
                <RowTemplate>
                    <MudTd DataLabel="Label">@context.Item1</MudTd>
                    <MudTd DataLabel="Value">@context.Item2</MudTd>
    
                </RowTemplate>
            </MudTable>
        </MudCardContent>
    </MudCard>
}

@code
{
    [Parameter, EditorRequired]
    public DbDataListCardEntity Entity { get; set; } = default!;
    [Parameter]
    public bool EditMode { get; set; }
    [Parameter]
    public Action<DbDashboardEntity?>? DeleteButtonClick { get; set; }

    protected override void OnInitialized()
    {
        Entity.UpdateData();
    }

    private void OnDeleteButtonClick()
    {
        DeleteButtonClick?.Invoke(Entity);
    }
}
