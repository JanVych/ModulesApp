@using ModulesApp.Interfaces
@using MudBlazor

<TaskNodeWidget Node="Node"
            Header="Data-Display">

    <MudSelect T="long"
               Style="min-width:175px"
               @bind-Value="Node.LongVal1"
               Variant="Variant.Outlined"
               Label="Select card"
               Margin="Margin.Dense">
        @foreach (var e in Node.Entities)
        {
            <MudSelectItem Value="@e.Id">@e.Name | @e.Id</MudSelectItem>
        }
    </MudSelect>

    <MudSwitch T="bool" ValueChanged="SwitchInputType" Size="Size.Small" Value="ToBool(Node.InputType) ">
        @Node.InputType input
    </MudSwitch>

</TaskNodeWidget>

@code 
{
    [Parameter] 
    public DataDisplayNode Node { get; set; } = null!;

    private void SwitchInputType(bool inputType)
    {
        if (inputType)
        {
            Node.AddPorts(NodeInputType.Double);
        }
        else
        {
            Node.AddPorts(NodeInputType.Single);
        }
    }

    private bool ToBool(NodeInputType type) => type == NodeInputType.Double;
}